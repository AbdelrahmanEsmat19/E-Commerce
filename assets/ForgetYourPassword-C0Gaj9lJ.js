import{r,l as V,j as e,a as p,B as f}from"./index-C7ekEgdJ.js";import{H as m}from"./Helmet-pvXxKuM-.js";function T(){const[c,x]=r.useState(""),[a,o]=r.useState(null),[y,b]=r.useState(!1),[l,h]=r.useState(0),[g,w]=r.useState(""),[j,k]=r.useState(!1),[u,s]=r.useState(!1),[i,v]=r.useState(""),[d,N]=r.useState(!1),S=V();async function P(t){s(!0);try{const n=await p.post("https://ecommerce.routemisr.com/api/v1/auth/forgotPasswords",{email:t});b(!0),h(1),f.success("The verification code sent successfully"),s(!1),o(!1)}catch(n){o(n.response.data.message),s(!1)}}async function C(t){s(!0);try{const n=await p.post("https://ecommerce.routemisr.com/api/v1/auth/verifyResetCode",{resetCode:t});k(!0),h(2),s(!1),o(!1),f.success("Verification code is correct!")}catch(n){o(n.response.data.message),s(!1)}}const z=/^(?=.*[a-zA-Z])(?=.*[0-9]).{8,}$/,E=t=>{t.preventDefault(),l===0?P(c):l===1?C(g):l===2&&j&&(z.test(i)?F():o("Password must be at least 8 characters, First character capital contain at least one letter and one number"))};async function F(){s(!0);try{const t=await p.put("https://ecommerce.routemisr.com/api/v1/auth/resetPassword",{email:c,newPassword:i});console.log(t),b(!0),s(!1),f.success("Password changed Successfully!"),setTimeout(()=>{S("/login")},2e3)}catch(t){console.error(t),o(t.message),s(!1)}}return e.jsx(e.Fragment,{children:e.jsx("form",{className:"max-w-xl mx-auto lg:my-0 my-16",onSubmit:E,children:l===0?e.jsxs("div",{className:"relative z-0 w-full mb-5 group",children:[e.jsx("input",{type:"email",name:"email",id:"email",className:"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer",placeholder:" ",value:c,onChange:t=>x(t.target.value)}),e.jsx("label",{htmlFor:"email",className:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 left-0 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6",children:"Enter your email"}),e.jsx("p",{id:"helper-text-explanation",class:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Please enter your Email."}),a&&e.jsx("p",{style:{color:"red"},children:a}),y&&e.jsx("p",{style:{color:"green"},children:"Password reset email sent successfully!"}),e.jsxs(m,{children:[e.jsx("meta",{charSet:"utf-8"}),e.jsx("title",{children:"Forget Password "}),e.jsx("link",{rel:"canonical",href:"http://mysite.com/example"})]}),e.jsx("button",{type:"submit",class:"text-white  end-2.5 bottom-2.5 mt-4 bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:u?e.jsx("i",{className:"fa-solid fa-spinner fa-spin"}):" Send Reset Code"})]}):l===1?e.jsxs("div",{className:"relative z-0 w-full mb-5 group",children:[e.jsx("input",{type:"text",id:"Verification",className:"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer",placeholder:"",value:g,onChange:t=>w(t.target.value)}),e.jsx("label",{htmlFor:"Verification",className:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 left-0 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6",children:"Verification Code"}),e.jsxs(m,{children:[e.jsx("meta",{charSet:"utf-8"}),e.jsx("title",{children:"Verification Code "}),e.jsx("link",{rel:"canonical",href:"http://mysite.com/example"})]}),e.jsx("p",{id:"helper-text-explanation",class:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Please enter the verification code sent to your email."}),a&&e.jsx("p",{style:{color:"red"},children:a}),e.jsxs("button",{type:"submit",class:"text-white  end-2.5 bottom-2.5 mt-4 bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:[u?e.jsx("i",{className:"fa-solid fa-spinner fa-spin"}):" Verify"," "]})]}):e.jsxs("div",{className:"relative z-0 w-full mb-5 group",children:[e.jsx("input",{type:"email",name:"email",disabled:!0,id:"email",className:"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer",placeholder:" ",value:c,onChange:t=>x(t.target.value)}),e.jsx("label",{htmlFor:"email",className:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 left-0 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6",children:"Your email"}),e.jsxs(m,{children:[e.jsx("meta",{charSet:"utf-8"}),e.jsx("title",{children:"Change Password "}),e.jsx("link",{rel:"canonical",href:"http://mysite.com/example"})]}),e.jsxs("div",{className:"relative z-0 w-full mb-5 group",children:[e.jsx("input",{type:d?"text":"password",name:"password",id:"password",className:"block py-2.5 px-0 mt-4 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer",placeholder:"",value:i,onChange:t=>v(t.target.value)}),e.jsx("label",{htmlFor:"password",className:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 left-0 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6",children:"Enter your password"}),e.jsx("button",{type:"button",className:"absolute right-0 top-0 mt-2 mr-2",onClick:()=>N(!d),children:d?e.jsx("i",{className:"fa-solid fa-eye-slash"}):e.jsx("i",{className:"fa-solid fa-eye"})}),e.jsx("p",{id:"helper-text-explanation",class:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Please enter your new password."}),a&&e.jsx("p",{style:{color:"red"},children:a}),e.jsx("button",{type:"submit",class:"text-white  end-2.5 bottom-2.5 mt-4 bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:u?e.jsx("i",{className:"fa-solid fa-spinner fa-spin"}):"Change Passwordy"})]})]})})})}export{T as default};
