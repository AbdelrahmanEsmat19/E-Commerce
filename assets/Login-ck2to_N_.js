import{r,l as g,U as y,j as e,b as n,a as w}from"./index-C5mswYAu.js";import{u as j}from"./formik.esm-BCUunBN8.js";import{c as N,a as i}from"./index.esm-BLchV8Om.js";import{H as k}from"./Helmet-evCaGZP0.js";function E(){const[o,c]=r.useState(null),[d,l]=r.useState(!1),u=g(),{setUserToken:m}=r.useContext(y),[t,p]=r.useState(!1),x={email:"",password:""},f=N().shape({email:i().email("Invalid email").required("Email is required"),password:i().min(8,"Password must be at least 8 characters").required("Password is required")}),s=j({initialValues:x,validationSchema:f,onSubmit:h});async function h(b){l(!0);try{const{data:a}=await w.post("https://ecommerce.routemisr.com/api/v1/auth/signin",b);a.message==="success"&&(m(a.token),localStorage.setItem("userToken",a.token),u("/")),console.log(a)}catch(a){console.log(a),c(a.response.data.message)}finally{l(!1)}}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"max-w-xl mx-auto my-14 lg:my-0",children:[e.jsx("h1",{className:"mb-5 text-3xl font-bold",children:"Login:"}),e.jsx("div",{children:o&&e.jsx("div",{className:"bg-red-300 p-2 text-black mb-6",children:o})}),e.jsxs("form",{className:"max-w-xl mx-auto",onSubmit:s.handleSubmit,children:[e.jsxs("div",{className:"relative z-0 w-full mb-5 group",children:[e.jsx("input",{type:"email",name:"email",id:"email",className:"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer",placeholder:" ",onChange:s.handleChange,value:s.values.email,onBlur:s.handleBlur}),e.jsx("label",{htmlFor:"email",className:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 left-0 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6",children:"Enter your email"}),s.touched.email&&s.errors.email?e.jsx("div",{className:"text-red-500 font-bold text-left",children:s.errors.email}):null]}),e.jsxs(k,{children:[e.jsx("meta",{charSet:"utf-8"}),e.jsx("title",{children:"Login Page"}),e.jsx("link",{rel:"canonical",href:"http://mysite.com/example"})]}),e.jsxs("div",{className:"relative z-0 w-full mb-5 group",children:[e.jsx("input",{type:t?"text":"password",name:"password",id:"password",className:"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer",placeholder:"",onChange:s.handleChange,value:s.values.password,onBlur:s.handleBlur}),e.jsx("label",{htmlFor:"password",className:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 left-0 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6",children:"Enter your password"}),s.touched.password&&s.errors.password?e.jsx("div",{className:"text-red-500 font-bold text-left",children:s.errors.password}):null,e.jsx("button",{type:"button",className:"absolute right-0 top-0 mt-2 mr-2",onClick:()=>p(!t),children:t?e.jsx("i",{className:"fa-solid fa-eye-slash"}):e.jsx("i",{className:"fa-solid fa-eye"})}),e.jsx("div",{className:"mt-4",children:e.jsxs("p",{children:["Not a member ?"," ",e.jsx(n,{className:"text-blue-500 underline",to:"/register",children:"Register"})," "]})}),e.jsx("div",{className:"mt-4",children:e.jsx(n,{className:"text-blue-500 underline",to:"/forget-password",children:"Forget your password ?"})})]}),e.jsx("button",{disabled:!(s.isValid&&s.dirty),type:"submit",className:"text-white btn",children:d?e.jsx("i",{className:"fa-solid fa-spinner fa-spin"}):"Login"})]})]})})}export{E as default};
