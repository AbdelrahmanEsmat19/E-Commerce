import{r,o as y,j as s,L as v,a as N,C as k,W as E,B as p}from"./index-BejWJpGB.js";import{P as A}from"./Product-0Ezkg--t.js";import{S as T}from"./index-BP1lnUdp.js";import{H as W}from"./Helmet-C18GNYT0.js";function F(){const[e,m]=r.useState([]),[i,c]=r.useState(null),[x,n]=r.useState(!1),{category:l}=y();r.useRef();async function u(){n(!0);try{const{data:a}=await N.get("https://ecommerce.routemisr.com/api/v1/products"),d=a.data.filter(f=>f.category.name.toLowerCase()===l.toLowerCase());console.log(d),m(d),c(null)}catch(a){console.log(a),c(a.response&&a.response.data&&a.response.data.message)}n(!1)}return r.useEffect(()=>{u()},[]),s.jsx(s.Fragment,{children:s.jsx("section",{className:"py-20",children:s.jsx("div",{className:"container mx-auto",children:x?s.jsx(v,{}):i?s.jsx("div",{className:"bg-red-500 p-3",children:i}):s.jsx("div",{className:"row",children:e.map(a=>s.jsx(A,{product:a},a.id))})})})})}function B(){var g,w;const[e,m]=r.useState({}),[i,c]=r.useState(null),[x,n]=r.useState(!1),{id:l}=y(),{addToCart:u}=r.useContext(k),{isInWishList:a,removeFromWishList:d,addToWishList:f}=r.useContext(E);function b(o){const{className:t,style:h,onClick:j}=o;return s.jsx("div",{className:t,style:{...h,display:"block",background:"blue"},onClick:j})}function C(o){const{className:t,style:h,onClick:j}=o;return s.jsx("div",{className:t,style:{...h,display:"block",background:"blue"},onClick:j})}const S={dots:!0,fade:!0,arrow:!0,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1,waitForAnimate:!1,nextArrow:s.jsx(b,{}),prevArrow:s.jsx(C,{})};async function L(o){n(!0);try{const{data:t}=await N.get(`https://ecommerce.routemisr.com/api/v1/products/${o}`);console.log(t.data),m(t.data),c(null)}catch(t){console.log(t),c(t.response.data.message)}finally{n(!1)}}r.useEffect(()=>{L(l)},[l]);async function P(o){const t=await u(o);t.status==="success"?p.success(t.message):p.error("Something went wrong")}return s.jsxs(s.Fragment,{children:[x?s.jsx(v,{fullPage:!0}):s.jsx("section",{className:"py-20",children:s.jsx("div",{className:"container mx-auto  ",children:i?s.jsx("div",{className:"bg-red-500 p-3",children:i}):s.jsxs("div",{className:"row items-center",children:[s.jsx("div",{className:"w-1/3 px-4",children:s.jsx(T,{...S,children:(g=e==null?void 0:e.images)==null?void 0:g.map((o,t)=>s.jsx("img",{src:o,alt:e.title},t))})}),s.jsxs("div",{className:"w-2/3 px-20  ",children:[s.jsxs(W,{children:[s.jsx("meta",{charSet:"utf-8"}),s.jsxs("title",{children:[e.slug," "]}),s.jsx("link",{rel:"canonical",href:"http://mysite.com/example"})]}),s.jsx("h1",{className:"mb-4 text-left",children:e.title}),s.jsx("p",{className:"mb-4 text-left",children:e.description}),s.jsxs("div",{className:"mb-3 flex justify-between items-center text-gray-500 font-light",children:[s.jsxs("div",{children:[s.jsx("p",{children:(w=e==null?void 0:e.category)==null?void 0:w.name}),s.jsxs("span",{children:[e.price," EGP"]})]}),s.jsxs("div",{children:[s.jsx("i",{className:"fas fa-star text-yellow-400"}),s.jsx("span",{children:e.ratingsAverage})]}),s.jsxs("div",{children:[" ",s.jsx("button",{onClick:()=>{a(e.id)?(d(e.id),p.warning("product removed successfully from WishList")):f(e.id)},children:a(e.id)?s.jsx("i",{class:"fa-solid fa-heart fa-2xl text-red-600"}):s.jsx("i",{class:"fa-solid fa-heart fa-2xl"})})]})]}),s.jsx("button",{onClick:()=>P(e.id),className:"btn text-white lg:w-full",children:"Add To Cart"})]})]})})}),s.jsx(F,{})]})}export{B as default};
