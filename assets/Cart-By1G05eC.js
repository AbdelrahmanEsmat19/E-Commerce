import{r as n,C as b,U as w,j as e,b as i,B as r}from"./index-BFgZFdlI.js";import{H as d}from"./Helmet-CG6iESib.js";function C(){const{getLoggedUserCart:x,cartDetails:s,numOfCartItems:m,setCartDetails:h,RemoveFromCart:g,UpdateProductQuantity:u,setnumOfCartItems:k,RemoveAllCart:y}=n.useContext(b),{userToken:p}=n.useContext(w);async function j(){const t=await x();t.status==="success"?h(t.data):console.log(t)}async function o(t){const a=await g(t);console.log(a),a.status==="success"?r.warning("Product removed successfully"):r.error("Something went wrong")}async function f(){const t=await y();console.log(t),t.status==="success"?r.warning("Products removed successfully"):r.error(t.message)}async function l(t,a){if(a===0)await o(t);else{const c=await u(t,a);console.log(c),c.status==="success"?r.success("Qty updated successfully"):r.error("Something went wrong")}}return n.useEffect(()=>{j()},[p]),e.jsx(e.Fragment,{children:e.jsx("section",{className:"py-5",children:e.jsxs("div",{className:"container mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Cart"}),s&&s.products.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex  justify-between items-center my-3",children:[e.jsxs("h4",{className:"text-lg",children:["Total items:",e.jsx("span",{children:m})]}),e.jsxs("h4",{className:"text-lg",children:["Total price:",e.jsx("span",{className:"text-green-400 font-bold",children:s.totalCartPrice})]})]}),e.jsx("div",{className:"relative overflow-x-auto   shadow-md sm:rounded-lg",children:e.jsxs("table",{className:"w-full   text-gray-500 dark:text-gray-400",children:[e.jsx("thead",{className:"text-xs text-center text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-16 py-3",children:e.jsx("span",{className:"sr-only",children:"Image"})}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Product"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Qty"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Price"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Action"})]})}),e.jsxs(d,{children:[e.jsx("meta",{charSet:"utf-8"}),e.jsx("title",{children:"Cart Page"}),e.jsx("link",{rel:"canonical",href:"http://mysite.com/example"})]}),e.jsxs("tbody",{children:[s==null?void 0:s.products.map(t=>e.jsxs("tr",{className:"bg-white text-center border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[e.jsx("td",{className:"p-4",children:e.jsx("img",{src:t.product.imageCover,className:"w-16 md:w-32 max-w-full max-h-full",alt:t.product.title})}),e.jsx("td",{className:"px-6 py-4 font-semibold text-gray-900 dark:text-white",children:t.product.title}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center lg:translate-x-12",children:[e.jsxs("button",{onClick:()=>l(t.product.id,t.count-1),className:"inline-flex items-center justify-center p-1 me-3 text-sm font-medium h-6 w-6 text-gray-500 bg-white border border-gray-300 rounded-full focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-600 dark:focus:ring-gray-700",type:"button",children:[e.jsx("span",{className:"sr-only",children:"Quantity button"}),e.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 2",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M1 1h16"})})]}),e.jsx("div",{children:t.count}),e.jsxs("button",{onClick:()=>l(t.product.id,t.count+1),className:"inline-flex items-center justify-center h-6 w-6 p-1 ms-3 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-full focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-600 dark:focus:ring-gray-700",type:"button",children:[e.jsx("span",{className:"sr-only",children:"Quantity button"}),e.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})})]})]})}),e.jsxs("td",{className:"px-6 py-4 font-semibold text-gray-900 dark:text-white",children:[(t.price*t.count).toFixed()," EGP"]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>o(t.product.id),className:"font-medium  bg-red-600 p-2 text-white rounded dark:text-red-500 hover:bg-red-400",children:"Remove"})})]},t.product.id)),";"]})]})}),e.jsx(i,{to:"/checkout",className:"w-full btn text-white block my-6",children:"Checkout"}),e.jsx(i,{to:"/cart",className:"p-3 bg-red-600 text-white w-full ",onClick:()=>f(),children:"CLear All Cart"})]}):e.jsx("p",{className:"text-lg text-center bg-green-400 p-2 mt-5",children:"Your cart is empty. Please add some products to proceed."}),e.jsxs(d,{children:[e.jsx("meta",{charSet:"utf-8"}),e.jsx("title",{children:"Cart Page "}),e.jsx("link",{rel:"canonical",href:"http://mysite.com/example"})]})]})})})}export{C as default};
